/*! jQuery NavToSelect - v0.2.1 - 2013-07-24
* https://github.com/amazingSurge/jquery-navToSelect
* Copyright (c) 2013 amazingSurge; Licensed GPL */
!function(a,b){"use strict";var c="navToSelect",d=b.navToSelect=function(a,c){this.nav=a,this.$nav=b(a),this._isBuilded=!1,this.settings=b.extend({},d.defaults,c),this.init()};d.defaults={maxLevel:4,prependTo:null,activeClass:"active",linkSelector:"a:first",className:"nav2select",indentString:"&ndash;",indentSpace:!0,defaultText:"Navigate to...",useOptgroup:!1,changeEvent:function(){b(this).data("linkable")!==!1&&d.goTo(this.value)}},d.prototype.init=function(){var a=this.getItems();this.build(a),this.$select.on("change",this.settings.changeEvent)},d.prototype.build=function(a){this.$select=b("<select />",{"class":this.settings.className}).html(this.generateOptionsString(a,1)),null===this.settings.prependTo?this.$nav.after(this.$select):this.$select.prependTo(this.settings.prependTo),this._isBuilded=!0},d.prototype.generateOptionString=function(a,b){var c=new Array(b).join(this.settings.indentString);return 1!==b&&this.settings.indentSpace&&(c+="&nbsp;"),'<option value="'+a.value+'"'+(a.linkable===!1?' data-linkable="false"':"")+(a.actived===!0?' selected="selected"':"")+">"+c+a.label+"</option>"},d.prototype.generateOptionsString=function(a,c){if(c>this.settings.maxLevel)return"";var d="",e=this;return b.each(a,function(a,b){b.linkable===!1&&"undefined"!=typeof b.items&&1===c&&e.settings.useOptgroup&&(d+='<optgroup label="'+b.label+'">',d+=e.generateOptionsString(b.items,c+1),d+="</optgroup>"),"undefined"!=typeof b.items?(d+=e.generateOptionString(b,c),d+=e.generateOptionsString(b.items,c+1)):d+=e.generateOptionString(b,c)}),d},d.prototype.getItems=function(){function a(c,e){var f=[];return c.children("li").each(function(){var c=b(this),g={value:d.getItemValue(c),label:d.getItemLabel(c),linkable:d.isLinkable(c),actived:d.isActived(c)};c.children("ul, ol").length&&(g.items=[],c.children("ul, ol").each(function(){g.items=g.items.concat(a(b(this),e+1))})),f.push(g)}),f}var c=[];this.settings.defaultText&&(c=c.concat({value:"#",label:this.settings.defaultText,linkable:!1}));var d=this;return c=c.concat(a(this.$nav,1))},d.prototype.getItemValue=function(a){return a.find(this.settings.linkSelector).attr("href")},d.prototype.isLinkable=function(a){return"#"!==this.getItemValue(a)},d.prototype.isActived=function(a){return a.is("."+this.settings.activeClass)},d.prototype.getItemLabel=function(a){return a.find(this.settings.linkSelector).text()},d.prototype.isBuilded=function(){return this._isBuilded},d.goTo=function(b){a.location.href=b},b.fn.navToSelect=function(a){return this.each(function(){b.data(this,c)||b.data(this,c,new d(this,a))})}}(document,jQuery);